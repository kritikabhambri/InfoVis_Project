
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.group-tick line {
  stroke: #000;
}

.ribbons {
  fill-opacity: 0.67;
}

</style>

<div id="chordDiagram"></div>
<div id="slider1"></div>
<script src="./js/d3.js"></script>

<script src="./js/d3.slider.js"></script>
<link rel="stylesheet" href="./js/d3.slider.css" />  


<div class="range">
  <input type="range" min="1" max="12" steps="1" value="1">
</div>

<ul class="range-labels">
  <li class="active selected">1: January</li>
  <li>2: February</li>
  <li>3: March</li>
  <li>4: April</li>
  <li>5: May</li>
  <li>6: june</li>
  <li>7: uly</li>
  <li>8: August</li>
  <li>9: September</li>
  <li>10: October</li>
  <li>11: November</li>
  <li>12: December</li>

</ul>

 

<script>

var matrix = [
[0,0,0,	0,0,0,0,0,113,175,49,119,43],
[0,0,0,0,0,0,0,0,62,100,16,91,35],
[0,0,0,	0,0,0,0,0,2,21,	1,11,4],
[0,0,0,0,0,0,0,	0,14,29,6,10,25],
[0,0,0,0,0,0,0,0,8,8,3,	3,1],
[0,0,0,0,0,0,0,	0,23,33,14,15,14],
[0,0,0,0,0,0,0,	0,59,88,14,63,60],
[0,0,0,0,0,0,0,0,6,12,5,13,5],
[113,62,2,14,8,	23,59,6,0,0,0,0,0],
[175,100,21,29,	8,33,88,12,0,0,	0,0,0],
[49,16,	1,6,3,14,14,5,0,0,0,0,0],
[119, 91,11,10,3,15,63,	13,0,0,	0,0,0],
[43,35,	4,25,1,	14,60,5,0,0,0,0,0]

 


];

var nameByIndex = ["Alcohol",  "Drugs", "Unauthorized",  "Endangering", "Harrasment",  "Publish", "Theft", "Disobidience","Management", "Art","languages","Science","Undeclared"];
d3.select('#slider1').call(d3.slider().axis(true).min(1).max(12).step(1).on("slide", function(evt, value) {
      
    document.getElementById('chordDiagram').innerHTML = " "


    if(value == 1){
    var matrix = [
[0,0,0,0,0,0,4,1,1],
[0,0,0,0,0,0,1,1,4],
[0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,2,0,4],
[0,0,0,0,0,0,2,1,0],
[0,0,0,0,0,0,4,1,4],
[4,1,0,2,2,4,0,0,0],
[1,1,0,0,1,1,0,0,0],
[1,4,0,4,0,4,0,0,0]

      

      ];
      var nameByIndex = ["Alcohol","Drugs","Unauthorized","Endangering","Publish","Theft","Management","Art","Undeclared"];

      drawChord(matrix, nameByIndex);
      //alert(value)

    }
    else if(value == 2){

      var matrix = [


[0,	0,	0,	0,	0,	0,	0,	0,	11,	35,	17,	5,	4],
[0,	0,	0,	0,	0,	0,	0,	0,	6,	30,	8,	8,	1],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	5,	0,	1,	1],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	4,	1,	0,	3],
[0,	0,	0,	0,	0,	0,	0,	0,	1,	15,	0,	0,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	7,	13,	6,	0,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	2,	20,	1,	1,	10],
[0,	0,	0,	0,	0,	0,	0,	0,	1,	1,	1,	2,	1],
[11,	6,	0,	0,	1,	7,	2,	1,	0,	0,	0,	0,	0],
[35,	30,	5,	4,	15,	13,	20,	1,	0,	0,	0,	0,	0],
[17,	8,	0,	1,	0,	6,	1,	1,	0,	0,	0,	0,	0],
[5,	8,	1,	0,	0,	0,	1,	2,	0,	0,	0,	0,	0],
[4,	1,	1,	3,	0,	0,	10,	1,	0,	0,	0,	0,	0]

   

      ];
      var nameByIndex = ["Alcohol","Drugs","Unauthorized3","Endangering","Harrasment","Publish","Theft","Disobidience","Management","Art","languages","Science","Undeclared"
];

      drawChord(matrix, nameByIndex);


    }


else if ( value ==3)
{

var matrix = [

[0,	0,	0,	0,	0,	0,	0,	0,	0,	66,	0,	30,	6],
[0,	0,	0,	0,	0,	0,	0,	0,	1,	10,	0,	22,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	1,	0,	1,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	3,	7,	0,	0,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	3,	0,	2,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	5,	5,	4,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	1,	15,	0,	24,	1],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	5,	0,	1,	0],
[0,	1,	0,	3,	0,	0,	1,	0,	0,	0,	0,	0,	0],
[66,	10,	1,	7,	3,	5,	15,	5,	0,	0,	0,	0,	0],
[0,	0,	0,	0,	0,	5,	0,	0,	0,	0,	0,	0,	0],
[30,	22,	1,	0,	2,	4,	24,	1,	0,	0,	0,	0,	0],
[6,	0,	0,	0,	0,	0,	1,	0,	0,	0,	0,	0,	0]


      ];
      var nameByIndex = ["Alcohol","Drugs","Unauthorized3","Endangering","Harrasment","Publish","Theft","Disobidience","Management","Art","languages","Science","Undeclared"
];

      drawChord(matrix, nameByIndex);


}


else if ( value == 4)

{
var matrix = [



[0,	0,	0,	0,	0,	0,	0,	0,	2,	26,	3,	1,	6],
[0,	0,	0,	0,	0,	0,	0,	0,	2,	21,	6,	4,	9],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	4,	0,	1,	1],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	3,	4,	2,	7],
[0,	0,	0,	0,	0,	0,	0,	0,	3,	3,	0,	0,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	1,	2,	0,	0,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	4,	21,	9,	12,	9],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	2,	0,	0,	0],
[2,	2,	0,	0,	3,	1,	4,	0,	0,	0,	0,	0,	0],
[26,	21,	4,	3,	3,	2,	21,	2,	0,	0,	0,	0,	0],
[3,	6,	0,	4,	0,	0,	9,	0,	0,	0,	0,	0,	0],
[1,	4,	1,	2,	0,	0,	12,	0,	0,	0,	0,	0,	0],
[6,	9,	1,	7,	0,	0,	9,	0,	0,	0,	0,	0,	0]




      ];
      var nameByIndex = ["Alcohol","Drugs","Unauthorized3","Endangering","Harrasment","Publish","Theft","Disobidience","Management","Art","languages","Science","Undeclared"
];

      drawChord(matrix, nameByIndex);




}


else if ( value == 5)
{
var matrix = [
[0,	0,	0,	0,	0,	0,	0,	0,	0,	2,	0,	0,	5],
[0,	0,	0,	0,	0,	0,	0,	0,	2,	2,	0,	1,	6],
[0,	0,	0,	0,	0,	0,	0,	0,	1,	0,	0,	0,	1],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	2,	1,	3,	10],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	1] ,
[0,	0,	0,	0,	0,	0,	0,	0,	0,	2,	0,	0,	0],
[0,	0,	0,	0,	0,	0,	0,	0,	2,	4,	0,	4,	4],
[0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	4,	0],
[0,	2,	1,	0,	0,	0,	2,	0,	0,	0,	0,	0,	0],
[2,	2,	0,	2,	0,	2,	4,	0,	0,	0,	0,	0,	0],
[0,	0,	0,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[0,	1,	0,	3,	0,	0,	4,	4,	0,	0,	0,	0,	0],
[5,	6,	1,	10,	1,	0,	4,	0,	0,	0,	0,	0,	0]



	
      ];
      var nameByIndex = ["Alcohol","Drugs","Unauthorized","Endangering","Harrasment","Publish","Theft","Disobidience","Management","Art","languages","Science","Undeclared"
];

      drawChord(matrix, nameByIndex);


}


else if (value == 6)

{
var matrix = [
[0,	0,	1,	0],
[0,	0,	0,	1],
[1,	0,	0,	0],
[0,	1,	0,	0]




	
      ];
      var nameByIndex = ["Science","Undeclared","Endangering","Drugs"
];

      drawChord(matrix, nameByIndex);


}

else if ( value ==7)

{
var matrix = [
[0,	2,	5],
[2,	0,	0],
[5,	0,	0]




	
      ];
      var nameByIndex = ["Undeclared","Theft","Drugs"
];

      drawChord(matrix, nameByIndex);


}


else if ( value == 8)

{
var matrix = [
[0,	1,	2,	3],
[1,	0,	0,	0],
[2,	0,	0,	0],
[3,	0,	0,	0]




	
      ];
      var nameByIndex = ["Languages","Drugs", "Publish","Alcohol"
];

      drawChord(matrix, nameByIndex);


}


else if ( value ==9)

{
var matrix = [
[0,	0,	0,	0,	15,	4,	2,	7,	1,	1,	7,	1],
[0,	0,	0,	0,	47,	2,	20,	4,	1,	8,	14,	0],
[0,	0,	0,	0,	24,	2,	19,	2,	0,	0,	16,	4],
[0,	0,	0,	0,	5,	4,	5,	0,	0,	1,	15,	0],
[15,	47,	24,	5,	0,	0,	0,	0,	0,	0,	0,	0],
[4,	2,	2,	4,	0,	0,	0,	0,	0,	0,	0,	0],
[2,	20,	19,	5,	0,	0,	0,	0,	0,	0,	0,	0],
[7,	4,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[1,	8,	0,	1,	0,	0,	0,	0,	0,	0,	0,	0],
[7,	14,	16,	15,	0,	0,	0,	0,	0,	0,	0,	0],
[1,	0,	4,	0,	0,	0,	0,	0,	0,	0,	0,	0]




	
      ];
      var nameByIndex = ["Art","Management","Science","Undeclared","Alcohol","Disobidience","Drugs","Endangering","Harrasment","Publish","Theft","Unauthorized"
];

      drawChord(matrix, nameByIndex);


}

else if ( value ==10)


{
var matrix = [
[0,	0,	0,	0,	0,	16,	31,	5,	9,	13,	7,	0,	0],
[0,	0,	0,	0,	0,	26,	1,	0,	6,	2,	1,	4,	3],
[0,	0,	0,	0,	0,	13,	3,	1,	8,	12,	1,	0,	0],
[0,	0,	0,	0,	0,	30,	16,	4,	1,	31,	0,	1,	2],
[0,	0,	0,	0,	0,	1,	13,	2,	2,	3,	0,	0,	0],
[16,	26,	13,	30,	1,	0,	0,	0,	0,	0,	0,	0,	0],
[31,	1,	3,	16,	13,	0,	0,	0,	0,	0,	0,	0,	0],
[5,	0,	1,	4,	2,	0,	0,	0,	0,	0,	0,	0,	0],
[9,	6,	8,	1,	2,	0,	0,	0,	0,	0,	0,	0,	0],
[13,	2,	12,	31,	3,	0,	0,	0,	0,	0,	0,	0,	0],
[7,	1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[0,	4,	0,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[0,	3,	0,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0]





	
      ];
      var nameByIndex = ["Art","langauges","Undeclared", "Management","Science", "Alcohol","Drugs","Endangering","Publish","Theft","Unauthorized","Disobidience", "Harrasment"
];

      drawChord(matrix, nameByIndex);


}


else if ( value == 11)

{
var matrix = [
[0,	0,	0,	0,	0,	6,	2,	1,	7,	0,	3,	0],
[0,	0,	0,	0,	2,	14,	12,	1,	1,	1,	1,	0],
[0,	0,	0,	0,	4,	58,	24,	0,	3,	1,	4,	1],
[0,	0,	0,	0,	0,	0,	1,	0,	3,	0,	0,	0],
[0,	2,	4,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[6,	14,	58,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[2,	12,	24,	1,	0,	0,	0,	0,	0,	0,	0,	0],
[1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[7,	1,	3,	3,	0,	0,	0,	0,	0,	0,	0,	0],
[0,	1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[3,	1,	4,	0,	0,	0,	0,	0,	0,	0,	0,	0],
[0,	0,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0]



	
      ];
      var nameByIndex = ["Art", "Management","Science", "Undeclared","Disobidience", "Alcohol","Drugs","Endangering","Theft","Harrasment", "Unauthorized","Publish"
];

      drawChord(matrix, nameByIndex);


}

else if ( value == 12)

{
var matrix = [
[0,	0,	0,	8,	1,	0],
[0,	0,	0,	5,	2,	4],
[0,	0,	0,	4,	0,	5],
[8,	5,	4,	0,	0,	0],
[1,	2,	0,	0,	0,	0],
[0,	4,	5,	0,	0,	0]




	
      ];
      var nameByIndex = ["Art", "Management", "Undeclared","Disobidience", "Alcohol","Drugs","Publish"
];

      drawChord(matrix, nameByIndex);


}

    }));

//on slider change
//drawChord(matrix,nameByIndex);

function drawChord(matrix, nameByIndex){


  var w = 1080,
      h = 800,
      r1 = h / 2,
      r0 = r1 - 80;

  var fill = d3.scale.category20c();

  var chord = d3.layout.chord()
      .padding(.04)
      .sortSubgroups(d3.descending)
      .sortChords(d3.descending).matrix(matrix);

  var arc = d3.svg.arc()
      .innerRadius(r0)
      .outerRadius(r0 + 20);

  var svg = d3.select("#chordDiagram").append("svg:svg")
      .attr("width", w)
      .attr("height", h)
    .append("svg:g")
      .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")")
    .attr("id", "chordDiagram");


  var g = svg.selectAll("g.group")
        .data(chord.groups)
      .enter().append("svg:g")
        .attr("class", "group")
        .on("mouseover", fade(svg,.02))
        .on("mouseout", fade(svg,.80));

  g.append("svg:path")
      .style("stroke", function(d) { return fill(d.index); })
      .style("fill", function(d) { return fill(d.index); })
      .attr("d", arc);

  g.append("svg:text")
      .each(function(d) { d.angle = (d.startAngle + d.endAngle) / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { return d.angle > Math.PI ? "end" : null; })
      .attr("transform", function(d) {
        return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")"
          + "translate(" + (r0 + 26) + ")"
              + (d.angle > Math.PI ? "rotate(180)" : "");
      })
      .text(function(d) { return nameByIndex[d.index]; });

  svg.selectAll("path.chord")
      .data(chord.chords)
      .enter().append("svg:path")
      .attr("class", "chord")
      .style("stroke", function(d) { return d3.rgb(fill(d.source.index)).darker(); })
      .style("fill", function(d) { return fill(d.source.index); })
      .attr("d", d3.svg.chord().radius(r0));

}

function fade(_this,opacity) {
  return function(d, i) {
    _this.selectAll("path.chord")
        .filter(function(d) { return d.source.index != i && d.target.index != i; })
      .transition()
        .style("stroke-opacity", opacity)
        .style("fill-opacity", opacity);
  };
}

</script>